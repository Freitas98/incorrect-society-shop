{% comment %}
  Newsletter Content
  Usage: {% render 'newsletter-content' %}
{% endcomment %}

<!-- Social icons are shown in the left sidebar above the newsletter link -->

<h2 class="newsletter-heading">{{ 'newsletter.stay_connected_title' | t }}</h2>
<p class="newsletter-intro">{{ 'newsletter.intro_html' | t }}</p>

<div
  id="NewsletterContainer"
  class="contact-card newsletter-card u-text-center"
  data-adding="{{ 'theme.messages.adding' | t }}"
  data-success="{{ 'newsletter.success' | t }}"
  data-error="{{ 'newsletter.error' | t }}"
  data-verifying="{{ 'newsletter.verifying' | t }}"
  data-captcha="{{ 'newsletter.captcha_message' | t }}"
>
  <h3 class="newsletter-highlight">{{ 'newsletter.subscribe_now' | t }}</h3>
  <p class="newsletter-copy">
    {{ 'newsletter.subscribe_prompt' | t }}
  </p>

  {% form 'customer', id: 'NewsletterForm', class: 'contact-form newsletter-form', onsubmit: 'window.loadingScreen.show();' %}
    {% if form.posted_successfully? %}
      <p class="newsletter-success newsletter-feedback" style="text-align: center; width: 100%;">
        {{ 'newsletter.success' | t }}
      </p>
      <script>
        if (window.history.replaceState) {
          window.history.replaceState(null, null, window.location.pathname);
        }
        try {
          localStorage.setItem('newsletter_modal_status', 'subscribed');
        } catch(e){}
      </script>
    {% endif %}
    {% if form.errors %}
      <div class="newsletter-errors newsletter-feedback">
        {{ form.errors | default_errors }}
      </div>
    {% endif %}
    <div class="newsletter-message newsletter-feedback" aria-live="polite" hidden></div>

    <input
      type="email"
      name="contact[email]"
      id="NewsletterForm-email"
      placeholder="{{ 'newsletter.email_placeholder' | t }}"
      autocomplete="email"
      required
    >

    <input type="hidden" name="contact[tags]" value="newsletter_page">
    <input type="hidden" name="contact[accepts_marketing]" value="true">

    <button
      type="submit"
      class="btn btn--primary"
    >
      {{ 'newsletter.subscribe_cta' | t }}
    </button>
  {% endform %}
</div>

<p>
  <em class="text-soft text-small">{{ 'newsletter.unsubscribe_note' | t }}</em>
</p>

<div class="newsletter-social">
  <p>To stay updated, follow us on social media:</p>
  {% render 'social-icons', size: 32 %}
</div>
