<!doctype html>
<html lang="{{ request.locale.iso_code }}">
  <head>
    {% # Inlined CSS Variables %}
    {% render 'css-variables' %}

    {% # Preload and load the critical CSS %}
    {{ 'critical.css' | asset_url | preload_tag: as: 'style' }}
    {{ 'critical.css' | asset_url | stylesheet_tag }}

    {% # Social, title, etc. %}
    {% render 'meta-tags' %}

  {{ content_for_header }}
    <script>
      window.themeStrings = Object.assign({}, window.themeStrings, {
        cart_empty_title: {{ 'cart.empty_title' | t | json }},
        adding: {{ 'theme.messages.adding' | t | json }},
        added_to_cart: {{ 'theme.messages.added_to_cart' | t | json }},
        error_adding_to_cart: {{ 'theme.messages.error_adding_to_cart' | t | json }},
        sold_out: {{ 'products.product.sold_out' | t | json }},
        add_to_cart: {{ 'products.product.add_to_cart' | t | json }},
        cart_remove_item_message: {{ 'cart.remove_item_message_html' | t: title: '___TITLE___' | json }},
        only_x_available: {{ 'cart.only_x_available' | t: count: '___COUNT___' | json }},
        cart_update_failed: {{ 'cart.update_failed' | t | json }},
        cart_clear_failed: {{ 'cart.clear_failed' | t | json }},
        stock_available_suffix: {{ 'cart.stock_available_suffix' | t | json }},
        option_size_label: {{ 'products.options.size' | t | json }},
        option_color_label: {{ 'products.options.color' | t | json }}
      });
    </script>
    <meta name="google-site-verification" content="cQT3m4WAClIG7LVSb9jwTrsBaW3XHArBN_kgB6ZfcUg" />
  </head>

  <body>
    {% # Announcement Bar %}
    {% section 'announcement-bar' %}

    {% # Sidebar Navigation %}
    {% section 'sidebar-navigation' %}

    {% # Main Content Area %}
    <main class="main-content">
      {% render 'newsletter-modal' %}
      {% sections 'header-group' %}

      {% if request.path contains '/challenge' and template.name != 'challenge' %}
        <section class="shopify-challenge shopify-challenge__container panel-constrained u-text-center u-stack-compact">
          <h1 class="shopify-challenge-title">{{ 'challenge.verify_heading' | t | default: 'Verification' }}</h1>
          <p class="text-lead">
            {{ 'challenge.title' | t | default: 'Please verify you are human' }}
          </p>

          <div class="challenge-content u-grid-center u-gap-16 u-mb-22">
            {{ content_for_layout }}
          </div>
          <p class="shopify-challenge-reason text-muted text-small u-mt-xs">
            {{ 'challenge.footer' | t | default: 'This step protects our store from spam and abuse.' }}
          </p>
        </section>
      {% else %}
        {% if request.path contains '/account/subscribe' and template.name != 'customers/subscribe' %}
          <section class="customers-subscribe panel-constrained u-text-center u-stack-spacious">
            <h1 class="policy-title">{{ 'subscribe.title' | t | default: 'Subscription confirmed' }}</h1>
            <p class="text-lead">
              {{
                'subscribe.message'
                | t
                | default: 'Your email has been confirmed. You will now receive our updates.'
              }}
            </p>
            <div class="u-grid-center u-gap-24 u-mt-lg u-mb-2xs">
              <a
                href="{{ routes.root_url }}"
                class="btn btn-primary"
              >
                {{- 'subscribe.shop_now' | t | default: 'Shop now' -}}
              </a>
              <a
                id="unsubscribeLink"
                href="#"
                class="link-underline link-muted text-xs"
              >
                {{- 'subscribe.unsubscribe' | t | default: 'Unsubscribe' -}}
              </a>
            </div>
            <script>
              (function () {
                const unsub = document.getElementById('unsubscribeLink');
                if (!unsub) return;
                const search = window.location.search || '';
                if (search && search.length > 1) {
                  unsub.href = '{{ routes.root_url }}account/unsubscribe' + search;
                }
              })();
            </script>
          </section>
        {% elsif request.path contains '/account/unsubscribe' %}
          <section class="customers-unsubscribe panel-constrained u-text-center u-stack-spacious">
            <h1 class="policy-title">{{ 'unsubscribe.title' | t | default: 'Unsubscribed' }}</h1>
            <p class="text-lead">
              {{
                'unsubscribe.message'
                | t
                | default: 'Youâ€™ve been unsubscribed from our emails. You can subscribe again anytime.'
              }}
            </p>
            <div class="u-grid-center u-gap-10 u-mt-lg u-mb-2xs">
              <a
                href="{{ routes.root_url }}"
                class="btn btn-primary"
              >
                {{- 'subscribe.back_home' | t | default: 'Back to home' -}}
              </a>
            </div>
            <div class="u-hidden">{{ content_for_layout }}</div>
          </section>
        {% else %}
          {{ content_for_layout }}
        {% endif %}
      {% endif %}

      {% sections 'footer-group' %}
    </main>
  </body>
</html>
